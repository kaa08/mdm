(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6873],{9568:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/predictservice",function(){return n(159)}])},159:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return O}});var o=n(5893),r=n(6830),a=n.n(r),i=n(9417),s=n(2730),c=n.n(s),l=n(7294),u=n(8901),d=n(8633),p=n(630);function _(e){let{onClick:t,onUploading:n}=e,[r,a]=(0,l.useState)(""),[s,_]=(0,l.useState)(null),[x,m]=(0,l.useState)(null),[f,v]=(0,l.useState)(!1),[h,b]=(0,l.useState)();(0,l.useEffect)(()=>{b(localStorage.getItem("loginToken")),console.log(h)},[h]);let g=async()=>{t(r);let e=new FormData;e.append("file",s);let o=await (0,p.Mk)(e,h);o&&n(o.data[0],e)},{getRootProps:j,getInputProps:y,isDragActive:w}=(0,u.uI)({accept:{"video/mp4":[".mp4"]},onDrop:e=>{v(e=>!e);let t=e[0];m(URL.createObjectURL(t)),_(t),a(t.name)},noKeyboard:!0}),S=f?(0,o.jsxs)("div",{className:c().outbox_second,children:[(0,o.jsxs)("div",{className:c().content_text,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(d.x2S,{size:20}),(0,o.jsx)("p",{children:r})]}),(0,o.jsx)(i.Z,{onClick:()=>{v(e=>!e)},style:{color:"black"},children:"삭제"})]}),(0,o.jsx)("div",{className:c().video_box,children:(0,o.jsx)("video",{muted:!0,controls:!0,width:"100%",style:{borderRadius:"8px"},children:(0,o.jsx)("source",{src:x,controls:!0})})})]}):(0,o.jsx)("div",{className:c().outbox,children:(0,o.jsx)("div",{className:c().form_box,children:(0,o.jsxs)("div",{...j(),className:c().box,children:[(0,o.jsx)("input",{...y()}),(0,o.jsx)(d.pOt,{size:50}),(0,o.jsx)("p",{children:"파일을 드래그하거나 클릭하세요."})]})})});return(0,o.jsxs)("div",{className:c().container,children:[S,(0,o.jsx)("input",{className:c().submitBtn,onClick:g,type:"button",value:"측정하기"})]})}var x=n(3684),m=n.n(x),f=n(5804),v=n(1163);function h(e){let{ratio:t}=e,n=(0,v.useRouter)(),[r,a]=(0,l.useState)(!1);(0,l.useEffect)(()=>{a(!0)},[]);let i=(0,o.jsx)("div",{className:m().container,children:(0,o.jsxs)("div",{className:m().outbox_second,children:[(0,o.jsxs)("div",{className:m().title,children:[(0,o.jsx)("p",{children:"사고현장 분석영상입니다."}),(0,o.jsx)("p",{children:"과실 비율은 ?"})]}),(0,o.jsx)("div",{className:m().result,children:(0,o.jsx)("h1",{children:(0,o.jsx)("span",{style:{color:"black",fontSize:"50px"},children:t})})}),(0,o.jsx)(f.Z,{onClickButton:()=>{n.push("/user/epilogue/newepilogue")},styles:{width:"50%",marginTop:"0px"},children:"후기 작성 하기"}),(0,o.jsx)(f.Z,{onClickButton:()=>{n.push("/")},styles:{width:"50%",marginTop:"0px"},children:"홈으로"})]})});return(0,o.jsx)(o.Fragment,{children:i})}var b={cm:!0,mm:!0,in:!0,px:!0,pt:!0,pc:!0,em:!0,ex:!0,ch:!0,rem:!0,vw:!0,vh:!0,vmin:!0,vmax:!0,"%":!0};function g(e){if("number"==typeof e)return{value:e,unit:"px"};var t,n=(e.match(/^[0-9.]*/)||"").toString();t=n.includes(".")?parseFloat(n):parseInt(n,10);var o=(e.match(/[^0-9]*$/)||"").toString();return b[o]?{value:t,unit:o}:(console.warn("React Spinners: ".concat(e," is not a valid css value. Defaulting to ").concat(t,"px.")),{value:t,unit:"px"})}function j(e){var t=g(e);return"".concat(t.value).concat(t.unit)}var y=function(){return(y=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},w=function(e,t){var n={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&0>t.indexOf(o)&&(n[o]=e[o]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var r=0,o=Object.getOwnPropertySymbols(e);r<o.length;r++)0>t.indexOf(o[r])&&Object.prototype.propertyIsEnumerable.call(e,o[r])&&(n[o[r]]=e[o[r]]);return n},S=function(e,t,n){var o="react-spinners-".concat(e,"-").concat(n);if("undefined"==typeof window||!window.document)return o;var r=document.createElement("style");document.head.appendChild(r);var a=r.sheet,i="\n    @keyframes ".concat(o," {\n      ").concat(t,"\n    }\n  ");return a&&a.insertRule(i,0),o}("GridLoader","0% {transform: scale(1)} 50% {transform: scale(0.5); opacity: 0.7} 100% {transform: scale(1); opacity: 1}","grid"),k=function(e){return Math.random()*e},N=function(e){var t=e.loading,n=e.color,o=void 0===n?"#000000":n,r=e.speedMultiplier,a=void 0===r?1:r,i=e.cssOverride,s=e.size,c=void 0===s?15:s,u=e.margin,d=void 0===u?2:u,p=w(e,["loading","color","speedMultiplier","cssOverride","size","margin"]),_=g(c),x=g(d),m=3*parseFloat(_.value.toString())+6*parseFloat(x.value.toString()),f=y({width:"".concat(m).concat(_.unit),fontSize:0,display:"inline-block"},void 0===i?{}:i),v=function(e){return{display:"inline-block",backgroundColor:o,width:"".concat(j(c)),height:"".concat(j(c)),margin:j(d),borderRadius:"100%",animationFillMode:"both",animation:"".concat(S," ").concat((e/100+.6)/a,"s ").concat(e/100-.2,"s infinite ease")}};return void 0===t||t?l.createElement("span",y({style:f},p,{ref:function(e){e&&e.style.setProperty("width","".concat(m).concat(_.unit),"important")}}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))}),l.createElement("span",{style:v(k(100))})):null},E=n(5007);function O(){let e=(0,E.v9)(e=>e.auth.isUserAuthenticated),[t,n]=(0,l.useState)(!1),[r,i]=(0,l.useState)(!1),[s,c]=(0,l.useState)({}),[u,d]=(0,l.useState)(null),[x,m]=(0,l.useState)(null),[f,v]=(0,l.useState)(!0);(0,l.useEffect)(()=>{let t=localStorage.getItem("loginToken");(async()=>{if(e){let e=await (0,p.NU)(t);e&&c(e.data.nickname)}})()},[]);let b=async(e,t)=>{let n=localStorage.getItem("loginToken"),o=e.fault_ratio;console.log(e),m(e.fault_ratio),i(!1),await (0,p.OD)(t,o,n)};return(0,o.jsx)(o.Fragment,{children:t?r?(0,o.jsxs)("div",{className:a().container,children:[(0,o.jsx)(N,{color:"#dbe7f9"}),f?(0,o.jsx)("p",{children:"과실 비율 측정중..."}):(0,o.jsx)("p",{children:"동영상 분석중..."})]}):(0,o.jsx)(h,{ratio:x}):(0,o.jsx)(_,{onClick:e=>{if(!e){alert("영상 파일을 넣어주세요");return}n(!0),i(!0)},onUploading:b,isUpload:r})})}},5804:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var o=n(5893),r=n(2857),a=n.n(r);function i(e){let{onClickButton:t,children:n,styles:r}=e;return(0,o.jsx)("div",{className:"".concat(a().button," ").concat(a().button2),style:r,onClick:t,children:n})}},6830:function(e){e.exports={container:"Predictservice_container__l6u_a"}},2857:function(e){e.exports={button:"Button_button__Y3HIB",button2:"Button_button2__5RWe0"}},2730:function(e){e.exports={container:"Dropdrag_container__OPwA4",outbox:"Dropdrag_outbox__oQyXF",outbox_second:"Dropdrag_outbox_second__1VC7b",video_box:"Dropdrag_video_box__euRXp",form_box:"Dropdrag_form_box__h_jRS",box:"Dropdrag_box__FYfjN",content_text:"Dropdrag_content_text__ixQoc",submitBtn:"Dropdrag_submitBtn__0PiMd"}},3684:function(e){e.exports={container:"Result_container__5Ingh",outbox_second:"Result_outbox_second__0aIUT",button:"Result_button__vKAqb",video_box:"Result_video_box__b2aw0",title:"Result_title__ApH_Z"}}},function(e){e.O(0,[4738,8901,2888,9774,179],function(){return e(e.s=9568)}),_N_E=e.O()}]);