(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2973],{7416:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/user/community/communityDetail/[id]",function(){return n(8104)}])},6327:function(e,t){"use strict";t.Z={src:"/_next/static/media/profile.3bb3c99b.png",height:512,width:512,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAKlBMVEXz9Pbx8vbz9PbR0tZMaXHMztDt7vH9/v/HyMv09fjp6+38/f69v8Hu7/L83TUdAAAACHRSTlPyLLD8APnprpF9MkIAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAN0lEQVR4nDXLtwEAIAwEsXub4AD7r0uFejFkYBqIjmiEtbt7G2SdUwlURETBrpk5a6PV9/YSvz8togFZ1HBEcQAAAABJRU5ErkJggg==",blurWidth:8,blurHeight:8}},8104:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return m}});var s=n(5893),i=n(630),a=n(8533),o=n(4107),r=n(1163),c=n(7294),l=n(5007);function m(){let e=(0,r.useRouter)(),t=(0,l.I0)(),[n,m]=(0,c.useState)({}),u=(0,c.useCallback)(async()=>{let t=await (0,i.Tr)(e.query.id);t&&m(t.data)},[e.query.id]);(0,c.useEffect)(()=>{u()},[u]),(0,c.useEffect)(()=>{n.boardId&&t(o.r.addPostDetail(n))},[n,t]);let d=async()=>{try{window.confirm("삭제 하시겠습니까?")&&(await (0,i.Pk)(e.query.id),alert("게시글이 삭제되었습니다.")),e.push("/user/community")}catch(e){console.error("게시글 삭제 중 오류가 발생했습니다:",e),alert("게시글 삭제 중 문제가 발생했습니다.")}};return(0,s.jsx)(s.Fragment,{children:n&&(0,s.jsx)(a.Z,{title:n.title,content:n.content,writerName:n.writerName,writerEmail:n.writerEmail,onClickDelete:d},n.boardId)})}},8533:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var s=n(5893),i=n(1163),a=n(7843),o=n.n(a),r=n(2091),c=n(7294),l=n(9417),m=n(630),u=n(5016),d=n.n(u),_=n(6327),h=n(5675),x=n.n(h);function A(e){let{boardId:t,commentId:n,commentWriterName:a,commentWriterEmail:o,createdDate:r,content:u,admin:h}=e,A=(0,i.useRouter)(),[p,w]=(0,c.useState)(),[g,j]=(0,c.useState)(!1),[y,b]=(0,c.useState)(u),[v,C]=(0,c.useState)(!1);return(0,c.useEffect)(()=>{w(localStorage.getItem("loginToken")),j(o===localStorage.getItem("currentEmail")),console.log(p),console.log(g)},[p]),(0,s.jsxs)("div",{className:d().comment_box,children:[(0,s.jsxs)("div",{className:d().userInfo_box,children:[(0,s.jsx)(x(),{src:_.Z,alt:"profile",className:d().img,priority:!0}),(0,s.jsxs)("div",{className:d().userInfo,children:[(0,s.jsx)("div",{className:d().nickname,children:a}),(0,s.jsx)("div",{className:d().date,children:r})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:d().comment,children:u}),g&&(0,s.jsxs)("div",{children:[(0,s.jsx)(l.Z,{onClick:()=>{C(e=>!e)},children:v?"닫기":"수정하기"}),(0,s.jsx)(l.Z,{onClick:()=>{(0,m.kZ)(t,n,p),alert("댓글이 삭제되었습니다."),h?A.push("/admin/communitymanage"):A.push("/user/community")},children:"삭제"})]})]}),v&&(0,s.jsx)("div",{className:d().answer,children:(0,s.jsxs)("div",{className:d().answer_write,children:[(0,s.jsx)("textarea",{placeholder:"댓글을 작성해주세요",value:y,onChange:e=>{b(e.target.value)}}),(0,s.jsx)(l.Z,{onClick:()=>{(0,m.Aw)(t,n,{content:y},p),alert("댓글이 수정되었습니다."),h?A.push("/admin/communitymanage"):A.push("/user/community")},children:"수정"})]})})]})}var p=n(5007);function w(e){let{title:t,content:n,like:a,writerName:u,writerEmail:d,onClickDelete:_,admin:h}=e,x=(0,i.useRouter)(),{id:w}=x.query,g=(0,p.v9)(e=>e.auth.isUserAuthenticated),[j,y]=(0,c.useState)(!1),[b,v]=(0,c.useState)(!1),[C,f]=(0,c.useState)(),[N,k]=(0,c.useState)(),[E,D]=(0,c.useState)(),[P,I]=(0,c.useState)({content:""});(0,c.useEffect)(()=>{(async()=>{let e=await (0,m.O1)(w);e&&(k(e.data.content),D(e.data.totalElements))})()},[w]),(0,c.useEffect)(()=>{f(localStorage.getItem("loginToken")),v(localStorage.getItem("currentEmail")===d),v(h),console.log(C),console.log(b)},[C]);let S=()=>{y(e=>!e)};return(0,s.jsx)("div",{className:o().wrapper,children:(0,s.jsxs)("div",{className:o().container,children:[!h&&(0,s.jsx)("div",{onClick:()=>{x.push("/user/community")},className:o().box,children:(0,s.jsx)("h2",{children:"커뮤니티 게시판"})}),b&&(0,s.jsxs)("div",{className:o().button_box,children:[(0,s.jsx)(l.Z,{onClick:()=>{x.push("/user/community/updateCommunity/".concat(w))},children:"수정하기"}),(0,s.jsx)(l.Z,{onClick:_,children:"삭제하기"})]}),(0,s.jsxs)("div",{className:o().content_box,children:[(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:o().title,children:[(0,s.jsxs)("span",{children:["제목: ",t]}),(0,s.jsxs)("p",{children:["작성자:",u]})]}),(0,s.jsx)("div",{className:o().content,children:(0,s.jsx)("p",{children:n})})]}),(0,s.jsxs)("div",{className:o().like,children:[j?(0,s.jsx)(r.$0H,{onClick:S,color:"red",style:{cursor:"pointer"}}):(0,s.jsx)(r.BgW,{onClick:S,style:{cursor:"pointer"}}),a]})]}),(0,s.jsxs)("div",{className:o().answer,children:[(0,s.jsxs)("div",{children:[E,"개 댓글"]}),(0,s.jsxs)("div",{className:o().answer_write,children:[(0,s.jsx)("textarea",{placeholder:g?"댓글을 작성해주세요":"로그인이 필요합니다.",onChange:e=>{I({content:e.target.value})},value:P.content,disabled:!g}),(0,s.jsx)(l.Z,{onClick:()=>{if(!g){alert("로그인이 필요합니다."),x.push("/login");return}""!==P.content.trim().length?((0,m.eG)(w,P,C),alert("댓글이 작성되었습니다."),h?x.push("/admin/communitymanage"):x.push("/user/community")):alert("댓글을 입력해주세요.")},children:"작성"})]})]}),N&&N.map(e=>(0,s.jsx)(A,{boardId:w,commentId:e.commentId,commentWriterName:e.commentWriterName,commentWriterEmail:e.commentWriterEmail,content:e.content,createdDate:e.createdDate,admin:h},e.commentId))]})})}},5016:function(e){e.exports={comment_box:"Comment_comment_box__hPKSB",img:"Comment_img__s0EZj",userInfo_box:"Comment_userInfo_box__ELyNV",userInfo:"Comment_userInfo__0D6EN",nickname:"Comment_nickname__zYuns",date:"Comment_date__yGM3_",comment:"Comment_comment__4BV7S",answer:"Comment_answer__22iqP",answer_write:"Comment_answer_write__TiB_V"}},7843:function(e){e.exports={wrapper:"CommunityPostDetail_wrapper__bnayh",container:"CommunityPostDetail_container___3vkI",box:"CommunityPostDetail_box__71TIg",search_bar:"CommunityPostDetail_search_bar__Pyp8P",paging:"CommunityPostDetail_paging__lWxHJ",new_post:"CommunityPostDetail_new_post__N_3SJ",content_box:"CommunityPostDetail_content_box__ZkBAq",title:"CommunityPostDetail_title__6LMV7",content:"CommunityPostDetail_content__p7VIq",like:"CommunityPostDetail_like__VicfP",answer:"CommunityPostDetail_answer__rpKy1",answer_write:"CommunityPostDetail_answer_write__9orpD",button_box:"CommunityPostDetail_button_box__HvUcC"}}},function(e){e.O(0,[3365,2888,9774,179],function(){return e(e.s=7416)}),_N_E=e.O()}]);